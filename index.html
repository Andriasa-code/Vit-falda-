<!DOCTYPE html>
<html lang="fo">
<head>
<meta charset="UTF-8">
<title>Vit falda ‚Äì 1 min leikur</title>
<link href="https://fonts.googleapis.com/css2?family=Boogaloo&display=swap" rel="stylesheet">
<style>
    :root{
        --bg:#cfeaff;
        --primary:#1e90ff;
        --accent:#ffb300;
        --good:#0a8a0a;
        --bad:#cc1f1f;
    }
    html, body { height: 100%; }
    body {
        font-family: 'Boogaloo', cursive;
        text-align: center;
        background: var(--bg);
        padding: 20px;
        margin:0;
    }
    h1 {
        font-size: 4rem;
        margin: 10px 0 20px;
    }
    #timer-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 2rem;
        padding: 10px 25px;
        background: var(--accent);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: 0 4px 0 rgba(0,0,0,0.15);
        font-family: 'Boogaloo', cursive; /* ensure Boogaloo on timer button */
    }
    .table-select{
        display:flex;
        flex-wrap:wrap;
        gap:12px;
        justify-content:center;
        margin: 10px auto 20px;
        max-width: 1100px;
    }
    .mode-btn{
        font-size: 1.8rem;
        padding: 12px 18px;
        border:none;
        border-radius: 12px;
        background: white;
        color:#034;
        cursor:pointer;
        box-shadow:0 3px 0 rgba(0,0,0,0.15);
        font-family: 'Boogaloo', cursive; /* Boogaloo on table buttons */
    }
    .mode-btn.active{
        background: var(--primary);
        color: #fff;
    }
    #question {
        font-size: 4rem;
        margin: 30px 0 20px;
        min-height: 72px;
    }
    .choices {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 18px;
        margin-top:10px;
    }
    .choice-btn {
        font-size: 2.5rem;
        padding: 20px 34px;
        border: none;
        border-radius: 18px;
        background: var(--primary);
        color: white;
        cursor: pointer;
        min-width: 200px;
        box-shadow: 0 4px 0 rgba(0,0,0,0.15);
        font-family: 'Boogaloo', cursive; /* Boogaloo on answer buttons */
    }
    .choice-btn:disabled{ opacity:0.6; cursor: default; }
    #feedback {
        margin-top: 24px;
        font-size: 3rem;
        height: 56px;
    }
    #final-score {
        margin-top: 30px;
        font-size: 3.6rem;
        color: var(--good);
        min-height: 44px;
    }
</style>
</head>
<body>

<button id="timer-btn" onclick="startTimer()">‚è±Ô∏è Tak t√≠√∞</button>

<h1>Vit falda</h1>

<div class="table-select" id="table-select">
    <!-- Buttons generated by JS for 1‚Äì10 and mixed -->
</div>

<div id="question">Vel tabell og tr√Ωst √° ‚ÄúTak t√≠√∞‚Äù fyri at byrja</div>
<div class="choices" id="choices"></div>
<div id="feedback"></div>
<div id="final-score"></div>

<script>
let correctAnswer = 0;
let score = 0;
let timeLeft = 60;
let timerRunning = false;
let timerInterval;
let selectedTable = null; // 1..10 or null for mixed

// Build table selection buttons
const tables = [...Array(10).keys()].map(i => i+1);
const selectWrap = document.getElementById('table-select');

function renderModeButtons(){
  selectWrap.innerHTML = '';
  tables.forEach(n => {
    const b = document.createElement('button');
    b.className = 'mode-btn' + (selectedTable===n ? ' active':'' );
    b.textContent = `${n}-tabellin`;
    b.onclick = () => setMode(n);
    selectWrap.appendChild(b);
  });
  const mixed = document.createElement('button');
  mixed.className = 'mode-btn' + (selectedTable===null ? ' active':'' );
  mixed.textContent = 'Blanda√∞ar tabellir';
  mixed.onclick = () => setMode(null);
  selectWrap.appendChild(mixed);
}

function setMode(n){
  selectedTable = (n===null)? null : Number(n);
  renderModeButtons();
  // Reset view text if timer not running
  if(!timerRunning){
    document.getElementById('question').textContent = selectedTable ? `${selectedTable} √ó ?` : 'Blanda√∞ar tabellir';
    document.getElementById('choices').innerHTML = '';
    document.getElementById('feedback').textContent = '';
    document.getElementById('final-score').textContent = '';
  }
}

function startTimer() {
    if (timerRunning) return;
    if (selectedTable === undefined) selectedTable = null; // safety
    timerRunning = true;
    score = 0;
    timeLeft = 60;

    document.getElementById('final-score').textContent = '';
    newQuestion();

    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('timer-btn').textContent = `‚è±Ô∏è ${timeLeft} sek.`;
        if (timeLeft <= 0) finishGame();
    }, 1000);
}

function finishGame() {
    clearInterval(timerInterval);
    timerRunning = false;
    document.getElementById('question').textContent = 'T√≠√∞in er farin üòä';
    document.getElementById('choices').innerHTML = '';
    document.getElementById('final-score').textContent = `Stig: ${score}`;
    document.getElementById('timer-btn').textContent = '‚è±Ô∏è Tak t√≠√∞';
}

function newQuestion() {
    if (!timerRunning) return;

    let a, b;
    if(selectedTable){
        a = selectedTable;
        b = Math.floor(Math.random() * 10) + 1; // 1..10
    } else {
        a = Math.floor(Math.random() * 10) + 1;
        b = Math.floor(Math.random() * 10) + 1;
    }

    correctAnswer = a * b;
    document.getElementById('question').textContent = `${a} √ó ${b} = ?`;
    generateChoices(a, b);
}

function generateChoices(a, b) {
    const choices = new Set([correctAnswer]);

    // Generate tricky near-correct answers
    while (choices.size < 5) {
        const mode = Math.random();
        let wrong;
        if (mode < 0.4) {
            // small +/- offset 1..4
            const offset = Math.floor(Math.random()*4) + 1;
            wrong = correctAnswer + (Math.random() < 0.5 ? -offset : offset);
        } else if (mode < 0.7) {
            // neighbour factor (a¬±1)*b or a*(b¬±1)
            if (Math.random() < 0.5) {
                const a2 = Math.max(1, Math.min(10, a + (Math.random() < 0.5 ? -1 : 1)));
                wrong = a2 * b;
            } else {
                const b2 = Math.max(1, Math.min(10, b + (Math.random() < 0.5 ? -1 : 1)));
                wrong = a * b2;
            }
        } else {
            // rounded to nearest ten or plus/minus 10
            const base = Math.round(correctAnswer/10)*10;
            wrong = base + (Math.random() < 0.5 ? -10 : 10);
        }
        if (wrong > 0 && wrong !== correctAnswer) choices.add(wrong);
    }

    const shuffled = Array.from(choices).sort(() => Math.random() - 0.5);
    const container = document.getElementById('choices');
    container.innerHTML = '';

    shuffled.forEach(value => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.textContent = value;
        btn.onclick = () => checkAnswer(value);
        container.appendChild(btn);
    });
}

function checkAnswer(selected) {
    if (!timerRunning) return;

    const feedback = document.getElementById('feedback');
    if (selected === correctAnswer) {
        feedback.textContent = 'R√¶tt! üéâ';
        feedback.style.color = '#0a8a0a';
        score++;
    } else {
        feedback.textContent = `Skeivt! (${correctAnswer})`;
        feedback.style.color = '#cc1f1f';
    }

    // short pause then next question
    setTimeout(() => {
        feedback.textContent = '';
        newQuestion();
    }, 800);
}

// Initial render
renderModeButtons();
setMode(null); // default mixed
</script>

</body>
</html>
